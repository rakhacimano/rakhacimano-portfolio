{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GS-LP-003/Documents/Personal/my-portfolio-website/apps/web/lib/auth-client.ts"],"sourcesContent":["import { createAuthClient } from \"better-auth/react\";\r\n\r\nexport const authClient = createAuthClient({\r\n    baseURL: \"http://localhost:4000/api/auth\",\r\n    fetchOptions: {\r\n        credentials: \"include\" // Ensure cookies are sent with requests\r\n    }\r\n});\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,aAAa,IAAA,mKAAgB,EAAC;IACvC,SAAS;IACT,cAAc;QACV,aAAa,UAAU,wCAAwC;IACnE;AACJ"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GS-LP-003/Documents/Personal/my-portfolio-website/apps/web/app/auth/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ArrowLeft, Eye, EyeOff, Loader2 } from \"lucide-react\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function AuthPage() {\r\n    const router = useRouter();\r\n    const [name, setName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [isSignUp, setIsSignUp] = useState(false);\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        // Create a timeout promise\r\n        const timeout = new Promise((_, reject) => {\r\n            setTimeout(() => reject(new Error(\"Request timeout - server took too long to respond\")), 15000);\r\n        });\r\n\r\n        try {\r\n            console.log(\"Starting auth request...\", { isSignUp, email, name });\r\n\r\n            if (isSignUp) {\r\n                const authPromise = authClient.signUp.email({\r\n                    email,\r\n                    password,\r\n                    name,\r\n                    callbackURL: \"/admin\"\r\n                });\r\n\r\n                // Race between auth request and timeout\r\n                const res = await Promise.race([authPromise, timeout]) as Awaited<typeof authPromise>;\r\n                console.log(\"SignUp Response:\", res);\r\n\r\n                if (res.error) {\r\n                    throw new Error(res.error.message || \"Failed to create account\");\r\n                }\r\n\r\n                toast.success(\"Account created successfully!\", {\r\n                    description: \"Please sign in with your new account.\"\r\n                });\r\n                // Switch to login form instead of redirecting\r\n                setIsSignUp(false);\r\n                setPassword(\"\"); // Clear password for security\r\n            } else {\r\n                const authPromise = authClient.signIn.email({\r\n                    email,\r\n                    password,\r\n                    callbackURL: \"/admin\"\r\n                });\r\n\r\n                const res = await Promise.race([authPromise, timeout]) as Awaited<typeof authPromise>;\r\n                console.log(\"SignIn Response:\", res);\r\n\r\n                if (res.error) {\r\n                    throw new Error(res.error.message || \"Invalid email or password\");\r\n                }\r\n\r\n                toast.success(\"Welcome back!\", {\r\n                    description: \"Redirecting to admin panel...\"\r\n                });\r\n                router.push('/admin');\r\n            }\r\n        } catch (error: unknown) {\r\n            console.error(\"Auth error caught:\", error);\r\n\r\n            let errorMessage = \"Something went wrong. Please try again.\";\r\n            let isDuplicateAccount = false;\r\n\r\n            if (error instanceof Error) {\r\n                const msg = error.message.toLowerCase();\r\n                if (msg.includes(\"timeout\")) {\r\n                    errorMessage = \"Connection timeout. Please check if the server is running and try again.\";\r\n                } else if (msg.includes(\"fetch\")) {\r\n                    errorMessage = \"Cannot connect to server. Please make sure the API is running on port 4000.\";\r\n                } else if (msg.includes(\"credentials\") || msg.includes(\"password\") || msg.includes(\"invalid\")) {\r\n                    errorMessage = \"Invalid email or password. Please check your credentials.\";\r\n                } else if (msg.includes(\"exists\") || msg.includes(\"duplicate\") || msg.includes(\"already\") || msg.includes(\"user with\")) {\r\n                    errorMessage = \"An account with this email already exists. Please sign in instead.\";\r\n                    isDuplicateAccount = true;\r\n                } else {\r\n                    errorMessage = error.message;\r\n                }\r\n            }\r\n\r\n            if (isDuplicateAccount) {\r\n                toast.warning(\"Account Already Exists\", {\r\n                    description: errorMessage,\r\n                    duration: 5000\r\n                });\r\n                // Switch to login form for convenience\r\n                setIsSignUp(false);\r\n                setPassword(\"\");\r\n            } else {\r\n                toast.error(\"Authentication Failed\", {\r\n                    description: errorMessage,\r\n                    duration: 5000\r\n                });\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-black text-white flex flex-col justify-center items-center p-4\">\r\n            <div className=\"w-full max-w-md\">\r\n                <Link href=\"/\" className=\"inline-flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors text-sm font-bold uppercase tracking-wide\">\r\n                    <ArrowLeft size={16} />\r\n                    Back to Portfolio\r\n                </Link>\r\n\r\n                <div className=\"bg-dark/50 border border-white/10 rounded-2xl p-8 backdrop-blur-sm\">\r\n                    <div className=\"mb-8 text-center\">\r\n                        <h1 className=\"text-2xl font-black mb-2\">{isSignUp ? \"Create Admin Account\" : \"Admin Access\"}</h1>\r\n                        <p className=\"text-gray-400 text-sm\">\r\n                            {isSignUp ? \"Register to manage your portfolio\" : \"Sign in to manage your portfolio content\"}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                        {isSignUp && (\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold uppercase tracking-wide text-gray-500 mb-2\">Full Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={name}\r\n                                    onChange={(e) => setName(e.target.value)}\r\n                                    className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary focus:bg-white/10 transition-all font-medium text-white placeholder-gray-600\"\r\n                                    placeholder=\"Your Name\"\r\n                                    required\r\n                                    disabled={loading}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                        <div>\r\n                            <label className=\"block text-xs font-bold uppercase tracking-wide text-gray-500 mb-2\">Email Address</label>\r\n                            <input\r\n                                type=\"email\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                className=\"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary focus:bg-white/10 transition-all font-medium text-white placeholder-gray-600\"\r\n                                placeholder=\"name@example.com\"\r\n                                required\r\n                                disabled={loading}\r\n                            />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <label className=\"block text-xs font-bold uppercase tracking-wide text-gray-500 mb-2\">Password</label>\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    type={showPassword ? \"text\" : \"password\"}\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"w-full px-4 py-3 pr-12 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-primary focus:bg-white/10 transition-all font-medium text-white placeholder-gray-600\"\r\n                                    placeholder=\"••••••••\"\r\n                                    required\r\n                                    disabled={loading}\r\n                                    minLength={8}\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-white transition-colors p-1\"\r\n                                    tabIndex={-1}\r\n                                >\r\n                                    {showPassword ? <EyeOff size={20} /> : <Eye size={20} />}\r\n                                </button>\r\n                            </div>\r\n                            {isSignUp && (\r\n                                <p className=\"text-xs text-gray-600 mt-1\">Minimum 8 characters</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={loading}\r\n                            className=\"w-full py-3 bg-primary text-dark font-black rounded-lg hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed mt-2 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {loading ? (\r\n                                <>\r\n                                    <Loader2 size={20} className=\"animate-spin\" />\r\n                                    {isSignUp ? \"Creating Account...\" : \"Signing In...\"}\r\n                                </>\r\n                            ) : (\r\n                                isSignUp ? \"Create Account\" : \"Sign In\"\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-6 text-center\">\r\n                        <button\r\n                            onClick={() => setIsSignUp(!isSignUp)}\r\n                            className=\"text-sm text-gray-500 hover:text-white font-medium transition-colors\"\r\n                            disabled={loading}\r\n                        >\r\n                            {isSignUp ? \"Already have an account? Sign in\" : \"Need an account? Create one\"}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}