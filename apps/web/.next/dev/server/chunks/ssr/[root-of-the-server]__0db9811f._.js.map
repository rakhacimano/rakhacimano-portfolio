{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GS-LP-003/Documents/Personal/my-portfolio-website/apps/web/lib/auth-client.ts"],"sourcesContent":["import { createAuthClient } from \"better-auth/react\";\r\n\r\nexport const authClient = createAuthClient({\r\n    baseURL: \"http://localhost:4000/api/auth\",\r\n    fetchOptions: {\r\n        credentials: \"include\" // Ensure cookies are sent with requests\r\n    }\r\n});\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,aAAa,IAAA,mKAAgB,EAAC;IACvC,SAAS;IACT,cAAc;QACV,aAAa,UAAU,wCAAwC;IACnE;AACJ"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GS-LP-003/Documents/Personal/my-portfolio-website/apps/web/app/admin/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { User, FileText, Briefcase, LogOut } from \"lucide-react\";\r\nimport { authClient } from \"@/lib/auth-client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect } from \"react\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const router = useRouter();\r\n    const { data: session, isPending, error } = authClient.useSession();\r\n\r\n    // Debug logging\r\n    useEffect(() => {\r\n        console.log('[Admin Layout] Session state:', { session, isPending, error, hasUser: !!session?.user });\r\n    }, [session, isPending, error]);\r\n\r\n    useEffect(() => {\r\n        // Only redirect if we're done loading and definitely have no user\r\n        // Add a small delay to allow session to fully hydrate\r\n        if (!isPending && !session?.user) {\r\n            const timer = setTimeout(() => {\r\n                // Double-check before redirecting\r\n                console.log('[Admin Layout] No session after delay, redirecting...');\r\n                router.push('/auth');\r\n            }, 500);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [session, isPending, router]);\r\n\r\n    // Show loading while pending OR while we don't have user data yet (briefly)\r\n    if (isPending) return <div className=\"h-screen flex items-center justify-center bg-black text-gray-400\">Loading...</div>;\r\n\r\n    if (!session?.user) {\r\n        // Show loading briefly while waiting for redirect or session\r\n        return <div className=\"h-screen flex items-center justify-center bg-black text-gray-400\">Checking authentication...</div>;\r\n    }\r\n\r\n    const handleLogout = async () => {\r\n        await authClient.signOut({ fetchOptions: { credentials: \"include\" } });\r\n        toast.success(\"Logged out successfully\", {\r\n            description: \"Session cleared. See you next time!\"\r\n        });\r\n        router.push('/auth');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-screen bg-black text-white\">\r\n            {/* Sidebar */}\r\n            <aside className=\"w-64 bg-dark border-r border-white/10 flex flex-col\">\r\n                <div className=\"h-16 flex items-center px-6 border-b border-white/10\">\r\n                    <span className=\"font-black text-xl tracking-tighter text-white\">ADMIN</span>\r\n                </div>\r\n\r\n                <nav className=\"flex-1 p-4 space-y-2\">\r\n                    <Link href=\"/admin\" className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-primary transition-colors\">\r\n                        <User size={20} />\r\n                        <span className=\"font-bold text-sm\">Dashboard</span>\r\n                    </Link>\r\n                    <Link href=\"/admin/blogs\" className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-primary transition-colors\">\r\n                        <FileText size={20} />\r\n                        <span className=\"font-bold text-sm\">Blogs</span>\r\n                    </Link>\r\n                    <Link href=\"/admin/projects\" className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-white/5 hover:text-primary transition-colors\">\r\n                        <Briefcase size={20} />\r\n                        <span className=\"font-bold text-sm\">Portfolio</span>\r\n                    </Link>\r\n                </nav>\r\n\r\n                <div className=\"p-4 border-t border-white/10\">\r\n                    <button onClick={handleLogout} className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-red-500 hover:bg-red-500/10 w-full transition-colors\">\r\n                        <LogOut size={20} />\r\n                        <span className=\"font-bold text-sm\">Logout</span>\r\n                    </button>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <main className=\"flex-1 overflow-auto bg-black\">\r\n                <header className=\"h-16 bg-dark/50 backdrop-blur border-b border-white/10 px-8 flex items-center justify-between sticky top-0 z-50\">\r\n                    <h2 className=\"font-bold text-lg\">Dashboard</h2>\r\n                    <div className=\"w-8 h-8 rounded-full bg-primary text-dark flex items-center justify-center font-bold\">A</div>\r\n                </header>\r\n                <div className=\"p-8\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS,YAAY,EAChC,QAAQ,EAGX;IACG,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,MAAM,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,kJAAU,CAAC,UAAU;IAEjE,gBAAgB;IAChB,IAAA,kNAAS,EAAC;QACN,QAAQ,GAAG,CAAC,iCAAiC;YAAE;YAAS;YAAW;YAAO,SAAS,CAAC,CAAC,SAAS;QAAK;IACvG,GAAG;QAAC;QAAS;QAAW;KAAM;IAE9B,IAAA,kNAAS,EAAC;QACN,kEAAkE;QAClE,sDAAsD;QACtD,IAAI,CAAC,aAAa,CAAC,SAAS,MAAM;YAC9B,MAAM,QAAQ,WAAW;gBACrB,kCAAkC;gBAClC,QAAQ,GAAG,CAAC;gBACZ,OAAO,IAAI,CAAC;YAChB,GAAG;YACH,OAAO,IAAM,aAAa;QAC9B;IACJ,GAAG;QAAC;QAAS;QAAW;KAAO;IAE/B,4EAA4E;IAC5E,IAAI,WAAW,qBAAO,8OAAC;QAAI,WAAU;kBAAmE;;;;;;IAExG,IAAI,CAAC,SAAS,MAAM;QAChB,6DAA6D;QAC7D,qBAAO,8OAAC;YAAI,WAAU;sBAAmE;;;;;;IAC7F;IAEA,MAAM,eAAe;QACjB,MAAM,kJAAU,CAAC,OAAO,CAAC;YAAE,cAAc;gBAAE,aAAa;YAAU;QAAE;QACpE,iJAAK,CAAC,OAAO,CAAC,2BAA2B;YACrC,aAAa;QACjB;QACA,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAM,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;sCAAiD;;;;;;;;;;;kCAGrE,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uKAAI;gCAAC,MAAK;gCAAS,WAAU;;kDAC1B,8OAAC,0MAAI;wCAAC,MAAM;;;;;;kDACZ,8OAAC;wCAAK,WAAU;kDAAoB;;;;;;;;;;;;0CAExC,8OAAC,uKAAI;gCAAC,MAAK;gCAAe,WAAU;;kDAChC,8OAAC,0NAAQ;wCAAC,MAAM;;;;;;kDAChB,8OAAC;wCAAK,WAAU;kDAAoB;;;;;;;;;;;;0CAExC,8OAAC,uKAAI;gCAAC,MAAK;gCAAkB,WAAU;;kDACnC,8OAAC,yNAAS;wCAAC,MAAM;;;;;;kDACjB,8OAAC;wCAAK,WAAU;kDAAoB;;;;;;;;;;;;;;;;;;kCAI5C,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAO,SAAS;4BAAc,WAAU;;8CACrC,8OAAC,oNAAM;oCAAC,MAAM;;;;;;8CACd,8OAAC;oCAAK,WAAU;8CAAoB;;;;;;;;;;;;;;;;;;;;;;;0BAMhD,8OAAC;gBAAK,WAAU;;kCACZ,8OAAC;wBAAO,WAAU;;0CACd,8OAAC;gCAAG,WAAU;0CAAoB;;;;;;0CAClC,8OAAC;gCAAI,WAAU;0CAAuF;;;;;;;;;;;;kCAE1G,8OAAC;wBAAI,WAAU;kCACV;;;;;;;;;;;;;;;;;;AAKrB"}}]
}